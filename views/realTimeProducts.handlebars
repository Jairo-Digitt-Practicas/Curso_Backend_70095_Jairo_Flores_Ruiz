<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Real-Time Products</title>
        <script src="/socket.io/socket.io.js"></script>
        <script src="/js/main.js" defer></script>
    </head>
    <body>
        <h1>Real-Time Products</h1>

        <form id="product-form">
            <input type="text" id="title" placeholder="Título" required />
            <input
                type="text"
                id="description"
                placeholder="Descripción"
                required
            />
            <input type="text" id="code" placeholder="Código" required />
            <input type="number" id="price" placeholder="Precio" required />
            <label>
                Disponible
                <input type="checkbox" id="status" />
            </label>
            <input type="number" id="stock" placeholder="Stock" required />
            <input type="text" id="category" placeholder="Categoría" required />
            <button type="submit">Agregar Producto</button>
        </form>

        <ul id="product-list">
            {{#each products}}
                <li>
                    <strong>{{this.title}}</strong>
                    -
                    {{this.description}}
                    - ${{this.price}}
                    <button
                        data-id="{{this._id}}"
                        class="delete-product"
                    >Eliminar</button>
                </li>
            {{/each}}
        </ul>

        <script>
            const socket = io(); // Manejo de la adición de productos en tiempo
            real const form = document.getElementById("product-form");
            form.addEventListener("submit", (e) => { e.preventDefault(); const
            product = { title: document.getElementById("title").value,
            description: document.getElementById("description").value, code:
            document.getElementById("code").value, price:
            document.getElementById("price").value, status:
            document.getElementById("status").checked, stock:
            document.getElementById("stock").value, category:
            document.getElementById("category").value, };
            socket.emit("newProduct", product); form.reset(); }); // Actualizar
            la lista de productos en tiempo real socket.on("updateProducts",
            (products) => { const productList =
            document.getElementById("product-list"); productList.innerHTML = "";
            => { const li = document.createElement("li"); li.innerHTML = `
            <strong>${product.title}</strong> - ${product.description} -
            $${product.price} <button data-id="${product._id}"
            class="delete-product">Eliminar</button> `;
            productList.appendChild(li); }); eliminación de productos
            document.querySelectorAll(".delete-product").forEach(button => {
            button.addEventListener("click", () => { const productId =
            button.getAttribute("data-id"); socket.emit("deleteProduct",
            productId); }); }); });
        </script>
    </body>
</html>